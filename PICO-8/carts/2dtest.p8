pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
#include alarms.lua
#include colors.lua
#include buttons.lua
#include 2dengine.lua

function _init()
	enemies={}
	for i=1,10 do
		local e = NewObject(flr(rnd(128)),flr(rnd(128)),1,0,0)
		add(enemies,e)
	end
	player = NewObject(63,63,2,0,0)
end

function _update60()
	if (btn(up)) then player.y-=1 end
	if (btn(down)) then player.y+=1 end
	if (btn(left)) then player.x-=1 end
	if (btn(right)) then player.x+=1 end
	
	for e in all(enemies) do
		if (dst(e,player)<30) then
			MoveTowardObject(e,player,0.2)
		else
			e.speed=0
		end
		MoveObject(e) --moves enemy
		
		if (RectHit(e,player)) then
			player.x=rnd(128)
			player.y=rnd(128)
		end
	end
end

function _draw()
	cls()
	
	for e in all(enemies) do
		e.Draw(e)
	end
	
	player.Draw(player)
end


__gfx__
000000000088880000bbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088888800bbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070088188188bb1bb1bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700088888888bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700088188188bb1bb1bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070088811888bbb11bbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088888800bbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000088880000bbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000605007050080500905009050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
